#!/bin/sh

path=`which mlt-config 2>/dev/null`
[ $? != 0 ] && echo "MLT not installed - aborting" && exit 1 

# Determine default prefix
prefix=`mlt-config --prefix`
[ "$prefix" = "" ] && echo "Can't locate MLT's prefix - please reconfigure MLT." && exit 1

# Allow override from command line
[ "$1" != "" ] && prefix="${1#--prefix=}"

# Sanity check
[ ! -d "$prefix" ] && echo "Invalid prefix $prefix - aborting" && exit 1

echo "prefix=$prefix" > config.mak
echo "MLT++ configured - will be installed in $prefix."


#!/bin/bash

# Clean up disables if not in help mode
[ "$help" != "1" ] && rm -f disable-* producers.dat filters.dat transitions.dat consumers.dat

# Iterate through arguments
for i in $*
do
	case $i in
		--disable-* )	touch disable-${i#--disable-} ;;
	esac
done

# Iterate through each of the components
for i in *
do
	if [ -x $i/configure -a \( "$help" = "1" -o ! -f disable-$i \) ]
	then
		echo "Configuring $i:"
		pushd $i > /dev/null
		./configure $@
		[ $? != 0 ] && exit 1
		popd > /dev/null
	fi
done

